(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e4f7095"],{3069:function(e,r,t){"use strict";t("b8e9")},"9ed6":function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login-container",attrs:{id:"login"}},[t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.validate}},[t("h3",{staticClass:"form-title"},[t("img",{attrs:{src:e.logo}})]),e._v(" "),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入手机号码"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submit("loginForm")}},model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username","string"===typeof r?r.trim():r)},expression:"loginForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-key",type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submit("loginForm")}},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password","string"===typeof r?r.trim():r)},expression:"loginForm.password"}})],1),e._v(" "),t("el-form-item",[t("el-checkbox",{model:{value:e.remeberPwd,callback:function(r){e.remeberPwd=r},expression:"remeberPwd"}},[e._v("记住密码")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",long:"",loading:e.loading},on:{click:function(r){return e.submit("loginForm")}}},[e._v("登录")])],1),e._v(" "),t("div",{staticClass:"info"},[e._v("普通用户登录账号: 18888888888 密码: 666666")]),e._v(" "),t("div",{staticClass:"info"},[e._v("管理员登录账号: 13543501039 密码: 123456")]),e._v(" "),t("div",{staticClass:"info"},[e._v("超级管理员登录账号: 18376686974 密码: 123456")])],1)],1)},i=[],o=(t("ac6a"),t("456d"),t("ed08")),s={name:"Login",data:function(){return{loading:!1,logo:t("2a0bc"),loginForm:{username:"",password:""},remeberPwd:!1,validate:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"登录密码不能为空",trigger:"blur"}]},redirect:""}},watch:{$route:{handler:function(e){var r=e.query;r&&(this.redirect=r.redirect,this.otherQuery=this.getOtherQuery(r))},immediate:!0},remeberPwd:function(e){e||Object(o["i"])("username")&&(Object(o["g"])("username"),Object(o["g"])("password"))}},created:function(){Object(o["i"])("username")&&(this.loginForm.username=Object(o["i"])("username"),this.loginForm.password=Object(o["e"])(Object(o["i"])("password")),this.remeberPwd=!0)},mounted:function(){this.$_initResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_resizeHandler:function(){var e=document.getElementById("login");e.style.height=document.body.scrollHeight+"px",window.onresize=function(){e.style.height=document.body.scrollHeight+"px"}},submit:function(e){var r=this;this.$refs[e].validate((function(e){e?r.$store.dispatch("user/login",r.loginForm).then((function(e){r.remeberPwd&&(Object(o["n"])("username",r.loginForm.username),Object(o["n"])("password",Object(o["h"])(r.loginForm.password))),r.$message.success("登录成功!"),r.$router.push({path:r.redirect||"/",query:r.otherQuery})})).catch((function(e){return r.$message.error(e.error)})).finally((function(){return r.loading=!1})):r.$message.error("登录失败!填写有误！")}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(r,t){return"redirect"!==t&&(r[t]=e[t]),r}),{})}}},a=s,l=(t("3069"),t("2877")),u=Object(l["a"])(a,n,i,!1,null,"27ce95e6",null);r["default"]=u.exports},b8e9:function(e,r,t){}}]);